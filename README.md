# Описание

Скрипт написан в образовательных целях, согласно Уроку №4 "Верстаем онлайн-библиотеку" модуля "Вёрстка для питониста", в целях помощи двенадцатилетнему Максиму и спасения его дедушки от скуки и единообразия деревенской жизни при отуствии доступа в Интернет. Спасибо [Devman](https://dvmn.org/).

Вся информация собрана с сайта [БОЛЬШАЯ БЕСПЛАТНАЯ БИБЛИОТЕКА](http://tululu.org/).

Скрипт создает частичную offline копию [БЕСПЛАТНОЙ БИБЛИОТЕКИ](https://sam1808.github.io/Create-onlite-library/pages/index1.html) на основании данных, полученных ранее, с [помощью Урока №3.](https://github.com/Sam1808/site-layout/tree/master/online_library_parsing)  

Один из возможных результатов парсинга online библиотеки доступен по адресу [https://sam1808.github.io/Create-onlite-library/pages/index1.html](https://sam1808.github.io/Create-onlite-library/pages/index1.html)

## Использование online библиотеки без доступа в сеть Интернет.

#### Подготовка к использованию.

Скрипт написан на `Python3`, очевидно, что вам необходимо установить Python3, если вы ещё этого не сделали.

Итак
- Качаем код. Как минимум необходимо скачать из текущего [репозитория](https://github.com/Sam1808/Create-onlite-library) следующее:
  - `requirements.txt` - для установки зависимостей;
  - `render_website.py` - генератор html-страничек;
  - файл **template.html** и прочие **css**, **js** файлы для корректного создания и отображения локального сайта.
- **Важно:** Для корректного создания сайта нам нужны данные: файлы книг, картинки и описание к нему *в домашней папке скрипта*. Данные вы должны были получить ранее, из [Урока №3](https://github.com/Sam1808/site-layout/tree/master/online_library_parsing), а самое важное для работы текущего скрипта - это название файла с описанием. Название файла и его формат [**books_description.json**](https://github.com/Sam1808/Create-onlite-library/blob/master/books_description.json). В текущем репозитории представлен его пример.
- Традиционно поднимаем виртуальное окружение (необязательно, но крайне полезно), командой `python3 -m venv my_virtual_env` и запускаем его командой, в зависимости от используемой операционной системы.
- Устанавливаем зависимости `pip install -r requirements.txt`
- Задерживаем дыхаение...

#### Offline запуск...

Итак у нас есть все необходимые файлы из текущего репозитория, папки с файлами книг и картинками, json-файл с описанием, установлены зависимости... Пробуем запускать генератор сайта:

`python render_website.py`

В случае успешного запуска скрип сгенерирет странички сайта. Странички будут лежать в папке `pages` и, например первая страничка, будет доступна по [локальному адресу](http://127.0.0.1:5500/pages/index1.html):

`http://127.0.0.1:5500/pages/index1.html`

Для перехода по страничкам используейте *пагинатор*, расположенный над карточками с описанием книг.

#### Аргументы командной строки.

По умолчанию, на одной страничке располагается 20 карточек с описанием книг. Но, что делать если книг слишком много... или наоборот - слишком мало? А если надо на одной странице указывать только одну книгу?
Для этого в скрит добавлен аргумент `books` с помощью которого мы можем указывать, сколько книг на каждой странице. Примеры:
 - `python render_website.py --books 40` - книг очень много, отображаем на каждой страничке по 40 книжек.
 - `python render_website.py --books 1` - книг крайне мало и каждая книга достойна своей отдельной странички.

#### Ошибки, про которые уже известно.

Скрипт явно укажет, если не найдет *books_description.json*.

Еще один вопрос остается открытым - это кодировки открываемых книг. Дедушка умеет читать только по-русски, а в браузере книги открываются с *крокозябрами*. Лечится это установкой кодировки страницы в браузере как `unicode` после открытия книги. Надеюсь Максим поможет дедушке разобраться.

У некоторых книг, при нажатии на кнопку *Читать* файл с содержимым книги не открывается, т.к. он не был доступен в источнике. На самом деле это можно исправить и подобные карточки с книгами просто не публиковать.
